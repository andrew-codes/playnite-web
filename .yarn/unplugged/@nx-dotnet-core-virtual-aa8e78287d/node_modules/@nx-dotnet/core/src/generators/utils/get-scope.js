"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getWorkspaceScope = void 0;
const devkit_1 = require("@nx/devkit");
function getWorkspaceScope(host) {
    // Prior to Nx 17 npm scope was included here.
    const { npmScope } = (0, devkit_1.getWorkspaceLayout)(host);
    if (npmScope) {
        return npmScope;
    }
    const fromPackageJson = getScopeFromPackageJson(host);
    if (fromPackageJson) {
        return fromPackageJson;
    }
    return null;
}
exports.getWorkspaceScope = getWorkspaceScope;
/**
 * Get the org scope from the package.json file
 */
function getScopeFromPackageJson(host) {
    try {
        const { name } = (0, devkit_1.readJson)(host, 'package.json');
        const parts = name === null || name === void 0 ? void 0 : name.split('/');
        if (!name || parts.length < 2) {
            return null;
        }
        return parts[0].substring(1);
    }
    catch (_a) {
        return null;
    }
}
//# sourceMappingURL=get-scope.js.map