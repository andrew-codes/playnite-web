"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const devkit_1 = require("@nx/devkit");
const path_1 = require("path");
const dotnet_1 = require("@nx-dotnet/dotnet");
const utils_1 = require("@nx-dotnet/utils");
function runExecutor(options, context, dotnetClient = new dotnet_1.DotNetClient((0, dotnet_1.dotnetFactory)())) {
    return tslib_1.__awaiter(this, void 0, void 0, function* () {
        const nxProjectConfiguration = (0, utils_1.getExecutedProjectConfiguration)(context);
        const cwd = (0, path_1.resolve)(devkit_1.workspaceRoot, nxProjectConfiguration.root);
        dotnetClient.cwd = cwd;
        const projectFilePath = yield (0, utils_1.getProjectFileForNxProject)(nxProjectConfiguration);
        options.output = options.output
            ? (0, path_1.resolve)(devkit_1.workspaceRoot, options.output)
            : undefined;
        const { publishProfile, extraParameters } = options, flags = tslib_1.__rest(options, ["publishProfile", "extraParameters"]);
        dotnetClient.publish((0, path_1.resolve)(devkit_1.workspaceRoot, projectFilePath), flags, publishProfile, extraParameters);
        return {
            success: true,
        };
    });
}
exports.default = runExecutor;
//# sourceMappingURL=executor.js.map