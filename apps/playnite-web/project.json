{
  "name": "playnite-web-app",
  "sourceRoot": "{projectRoot}/src",
  "projectType": "application",
  "targets": {
    "clean": {
      "executor": "nx:run-commands",
      "cache": true,
      "dependsOn": ["clean/package", "clean/test", "clean/build"],
      "options": {
        "parallel": true,
        "commands": []
      }
    },
    "clean/build": {
      "executor": "nx:run-commands",
      "cache": true,
      "options": {
        "command": "yarn rimraf _custom-server-build .next .generated",
        "cwd": "{projectRoot}"
      }
    },
    "clean/package": {
      "cache": true,
      "executor": "nx:run-commands",
      "options": {
        "command": "yarn rimraf _packaged",
        "cwd": "{projectRoot}"
      }
    },
    "clean/test": {
      "cache": true,
      "executor": "nx:run-commands",
      "options": {
        "command": "yarn rimraf .test-runs .nyc_output visual-regression-tests/*report cypress/screenshots/* cypress/videos/* visual-regression-tests/**/comparison visual-regression-tests/**/diff",
        "cwd": "{projectRoot}"
      }
    },
    "db/prepare-snapshot": {
      "executor": "nx:run-commands",
      "dependsOn": ["^start", "prepare", "^prepare"],
      "options": {
        "command": "yarn tsx cypress/scripts/prepare-snapshot.ts",
        "cwd": "{projectRoot}",
        "env": {
          "NODE_ENV": "production",
          "DATABASE_URL": "postgresql://local:dev@localhost:5432/games?schema=public&pgbouncer=true"
        }
      }
    },
    "db/sync-user-library": {
      "executor": "nx:run-commands",
      "options": {
        "command": "yarn tsx cypress/scripts/sync.ts",
        "cwd": "{projectRoot}"
      }
    },
    "db/finalize-snapshot": {
      "executor": "nx:run-commands",
      "options": {
        "command": "yarn tsx cypress/scripts/finalize-snapshot.ts",
        "cwd": "{projectRoot}",
        "env": {
          "NODE_ENV": "production",
          "DATABASE_URL": "postgresql://local:dev@localhost:5432/games?schema=public&pgbouncer=true"
        }
      }
    },
    "db/use-snapshot": {
      "executor": "nx:run-commands",
      "options": {
        "command": "yarn tsx cypress/scripts/restore-snapshot.ts",
        "cwd": "{projectRoot}",
        "env": {
          "NODE_ENV": "production",
          "DATABASE_URL": "postgresql://local:dev@localhost:5432/games?schema=public&pgbouncer=true"
        }
      }
    },
    "prepare": {
      "executor": "nx:run-commands",
      "dependsOn": ["clean/build", "^prepare"],
      "cache": false,
      "options": {
        "commands": ["yarn graphql-codegen --config codegen.ts"],
        "cwd": "{projectRoot}"
      }
    },
    "start": {
      "executor": "nx:run-commands",
      "options": {
        "parallel": true,
        "commands": ["nodemon"],
        "cwd": "{projectRoot}",
        "env": {
          "NODE_ENV": "development",
          "LOG_LEVEL": "debug",
          "SECRET": "dev-secret",
          "PORT": "3000",
          "HOST": "localhost",
          "DATABASE_URL": "postgresql://local:dev@localhost:5432/games?schema=public&pgbouncer=true",
          "COVER_ART_PATH": ".cover-art"
        }
      }
    },
    "test/components": {
      "executor": "nx:run-commands",
      "dependsOn": ["clean/test"],
      "options": {
        "parallel": true,
        "commands": [
          "yarn cypress open --component --browser chrome",
          "yarn react-devtools"
        ],
        "cwd": "{projectRoot}"
      },
      "defaultConfiguration": "dev",
      "configurations": {
        "dev": {
          "env": {
            "TEST": "component",
            "NODE_ENV": "development",
            "CMD": "run"
          }
        },
        "ci": {
          "commands": ["yarn cypress run --component --browser chrome"],
          "env": {
            "CI": "true",
            "TEST": "component",
            "NODE_ENV": "production"
          }
        },
        "ci/local": {
          "commands": ["yarn cypress run --component --browser chrome"],
          "env": {
            "CI": "true",
            "NODE_ENV": "production",
            "TEST": "component",
            "CMD": "run"
          }
        }
      }
    },
    "test/components/update": {
      "executor": "nx:run-commands",
      "dependsOn": ["clean/test"],
      "options": {
        "parallel": false,
        "command": "yarn tsx scripts/component-for-update.ts",
        "cwd": "{projectRoot}",
        "env": {
          "NODE_ENV": "production",
          "TEST": "component",
          "COVER_ART_PATH": ".cover-art"
        }
      }
    },
    "test/e2e/dev": {
      "executor": "nx:run-commands",
      "dependsOn": ["clean/test", "^start", "prepare", "^prepare", "^build"],
      "options": {
        "parallel": true,
        "commands": ["yarn react-devtools", "yarn tsx scripts/e2e-dev.ts"],
        "cwd": "{projectRoot}",
        "env": {
          "START_SERVER_AND_TEST_INSECURE": "1",
          "LOG_LEVEL": "verbose",
          "NODE_ENV": "production",
          "TEST": "e2e",
          "CYPRESS_REMOTE_DEBUGGING_PORT": "9222",
          "SECRET": "dev-secret",
          "DATABASE_URL": "postgresql://local:dev@localhost:5432/games?schema=public&pgbouncer=true",
          "COVER_ART_PATH": ".cover-art"
        }
      }
    },
    "test/e2e": {
      "executor": "nx:run-commands",
      "options": {
        "parallel": true,
        "cwd": "{projectRoot}",
        "commands": ["yarn tsx scripts/e2e.ts"]
      },
      "defaultConfiguration": "ci",
      "configurations": {
        "ci": {
          "env": {
            "CMD": "run",
            "LOCAL": "true",
            "CI": "true",
            "TEST": "e2e",
            "LOG_LEVEL": "info",
            "CYPRESS_REMOTE_DEBUGGING_PORT": "9222",
            "START_SERVER_AND_TEST_INSECURE": "1",
            "SECRET": "dev-secret",
            "NODE_ENV": "production",
            "DATABASE_URL": "postgresql://local:dev@localhost:5432/games?schema=public&pgbouncer=true",
            "SPLIT_FILE": "cypress-timings.json",
            "COVER_ART_PATH": ".cover-art"
          }
        },
        "dev": {
          "env": {
            "CMD": "open",
            "LOCAL": "true",
            "CI": "true",
            "LOG_LEVEL": "verbose",
            "SECRET": "dev-secret",
            "TEST": "e2e",
            "CYPRESS_REMOTE_DEBUGGING_PORT": "9222",
            "START_SERVER_AND_TEST_INSECURE": "1",
            "NODE_ENV": "production",
            "DATABASE_URL": "postgresql://local:dev@localhost:5432/games?schema=public&pgbouncer=true",
            "COVER_ART_PATH": ".cover-art"
          }
        },
        "timings": {
          "env": {
            "CMD": "run",
            "LOCAL": "true",
            "CI": "true",
            "SECRET": "dev-secret",
            "LOG_LEVEL": "error",
            "TEST": "e2e",
            "CYPRESS_REMOTE_DEBUGGING_PORT": "9222",
            "START_SERVER_AND_TEST_INSECURE": "1",
            "NODE_ENV": "production",
            "DATABASE_URL": "postgresql://local:dev@localhost:5432/games?schema=public&pgbouncer=true",
            "COVER_ART_PATH": ".cover-art",
            "SPLIT": "1",
            "SPLIT_INDEX": "0",
            "SPLIT_FILE": "cypress-timings.json"
          }
        }
      }
    },
    "test/e2e/coverage": {
      "executor": "nx:run-commands",
      "dependsOn": ["build/e2e"],
      "options": {
        "parallel": false,
        "cwd": "{projectRoot}",
        "commands": [
          "yarn tsx scripts/packageFiles.ts",
          "yarn tsx ../sync-library-processor/scripts/start.e2e.ts & yarn tsx scripts/e2e.ts"
        ],
        "env": {
          "CMD": "run",
          "LOCAL": "true",
          "CI": "true",
          "COVERAGE": "true",
          "SECRET": "dev-secret",
          "LOG_LEVEL": "info",
          "TEST": "e2e",
          "CYPRESS_REMOTE_DEBUGGING_PORT": "9222",
          "START_SERVER_AND_TEST_INSECURE": "1",
          "NODE_ENV": "production",
          "COVER_ART_PATH": ".cover-art",
          "DATABASE_URL": "postgresql://local:dev@localhost:5432/games?schema=public&pgbouncer=true",
          "SPLIT_FILE": "cypress-timings.json"
        }
      }
    },
    "test/e2e/update": {
      "executor": "nx:run-commands",
      "options": {
        "parallel": true,
        "commands": ["yarn tsx scripts/e2e.ts"],
        "cwd": "{projectRoot}",
        "env": {
          "CMD": "run",
          "CI": "true",
          "SECRET": "dev-secret",
          "LOCAL": "true",
          "CYPRESS_REMOTE_DEBUGGING_PORT": "9222",
          "NODE_ENV": "production",
          "UPDATE": "true",
          "COVER_ART_PATH": ".cover-art",
          "LOG_LEVEL": "info"
        }
      }
    },
    "build": {
      "executor": "nx:run-commands",
      "defaultConfiguration": "production",
      "options": {
        "cwd": "{projectRoot}",
        "parallel": false,
        "commands": ["yarn nx start dev-services", "yarn tsx scripts/build.ts"]
      },
      "configurations": {
        "production": {
          "env": {
            "NODE_ENV": "production"
          }
        }
      }
    },
    "build/e2e": {
      "executor": "nx:run-commands",
      "options": {
        "cwd": "{projectRoot}",
        "commands": ["yarn tsx scripts/build.ts"],
        "env": {
          "NODE_ENV": "production",
          "INSTRUMENT": "true"
        }
      }
    },
    "package": {
      "executor": "nx:run-commands",
      "options": {
        "parallel": false,
        "commands": [],
        "cwd": "{projectRoot}"
      },
      "defaultConfiguration": "production",
      "configurations": {
        "files": {
          "commands": ["yarn tsx scripts/packageFiles.ts"]
        },
        "production": {
          "commands": [
            "yarn tsx scripts/packageFiles.ts",
            "yarn tsx scripts/package.ts"
          ]
        }
      }
    },
    "package/e2e": {
      "executor": "nx:run-commands",
      "cache": true,
      "options": {
        "parallel": false,
        "commands": [
          "yarn tsx scripts/packageFiles.ts",
          "yarn tsx scripts/package.ts"
        ],
        "env": {
          "LOCAL": "true"
        },
        "cwd": "{projectRoot}"
      }
    },
    "package/prune": {
      "executor": "nx:run-commands",
      "options": {
        "parallel": false,
        "commands": ["yarn tsx scripts/packagePrune.ts"],
        "cwd": "{projectRoot}"
      }
    },
    "publish": {
      "executor": "nx:run-commands",
      "options": {
        "parallel": false,
        "commands": ["yarn tsx scripts/publish.ts"],
        "cwd": "{projectRoot}"
      }
    }
  },
  "tags": ["linux"],
  "implicitDependencies": []
}
